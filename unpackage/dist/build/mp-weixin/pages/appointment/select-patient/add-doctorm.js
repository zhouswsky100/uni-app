(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/appointment/select-patient/add-doctorm"],{"025f":function(e,t,i){"use strict";var a,n=function(){var e=this,t=e.$createElement;e._self._c},l=[];i.d(t,"b",function(){return n}),i.d(t,"c",function(){return l}),i.d(t,"a",function(){return a})},"11e8":function(e,t,i){"use strict";i.r(t);var a=i("fe1a"),n=i.n(a);for(var l in a)"default"!==l&&function(e){i.d(t,e,function(){return a[e]})}(l);t["default"]=n.a},1283:function(e,t,i){"use strict";var a=i("c71a"),n=i.n(a);n.a},"4b95":function(e,t,i){"use strict";(function(e){i("9e88"),i("921b");a(i("66fd"));var t=a(i("ed4b"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},c71a:function(e,t,i){},ed4b:function(e,t,i){"use strict";i.r(t);var a=i("025f"),n=i("11e8");for(var l in n)"default"!==l&&function(e){i.d(t,e,function(){return n[e]})}(l);i("1283");var o,s=i("f0c5"),r=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);t["default"]=r.exports},fe1a:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("2f62");function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){l(e,t,i[t])})}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o={data:function(){return{i:0,reg:/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,patientInfo:{},allList:{base:{title:"基础信息(必填)",isFill:!0,inputList:[{key:"pname",title:"姓名",value:"",placeholder:"请输入姓名"},{key:"leixing",title:"证件类型",value:"身份证",placeholder:"请输入证件类型",region:["身份证"],regionKeys:[1],checkedIndex:0},{key:"idcard",title:"身份证",value:"",placeholder:"请输入证件号码"},{key:"sex",title:"性别",value:"",placeholder:"请选择",region:["男","女"],regionKeys:[1,2],checkedIndex:0},{key:"birthday",title:"出生日期",value:"",placeholder:"请选择出生日期",date:"2000-01-01"},{key:"nation",title:"民族",value:"",placeholder:"请选择",region:[],regionKeys:[],checkedIndex:0},{key:"pref",title:"成员关系",value:"",placeholder:"请选择",region:[],regionKeys:[],checkedIndex:0},{key:"mobile",title:"手机号码",value:"",placeholder:"请输入手机号码"}]},ref:{title:"监护人信息(必填)",isFill:!1,marginTop:!0,inputList:[{key:"refPersonName",title:"姓名",value:"",placeholder:"请输入监护人的姓名"},{key:"leixing",title:"证件类型",value:"身份证",placeholder:"请输入证件类型",region:["身份证"],regionKeys:[1],checkedIndex:0},{key:"refPersonIdcard",title:"身份证",value:"",placeholder:"请输入监护人证件号码"},{key:"refPersonSex",title:"性别",value:"",placeholder:"请选择",region:["男","女"],regionKeys:[1,2],checkedIndex:0},{key:"refPersonBirthday",title:"出生日期",value:"",placeholder:"请选择监护人出生日期",date:"2000-01-01"},{key:"refPersonPref",title:"与就诊人关系",value:"",placeholder:"请选择",region:[],regionKeys:[],checkedIndex:0},{key:"refPersonMobile",title:"手机号码",value:"",placeholder:"请输入监护人手机号码"}]}}}},onLoad:function(e){this.getData()},methods:{blur:function(t){var i=Number(t.currentTarget.dataset.index),a=t.currentTarget.dataset.key;"mobile"!=this.allList[a].inputList[i].key&&"refPersonMobile"!=this.allList[a].inputList[i].key||/^1[345789]\d{9}$/.test(t.detail.value)||e.showToast({title:"手机格式填写不对",icon:"none"}),2==i&&(this.reg.test(t.detail.value)?(this.allList[a].inputList[4].value=this.$globalMethod.hqkFuncBuildBirthdayByCardid(t.detail.value),"base"==a&&this.$globalMethod.getAge(t.detail.value)<16&&(this.allList.ref.isFill=!0)):e.showToast({title:"身份证格式填写不对",icon:"none"})),this.allList[a].inputList[i].value=t.detail.value},PickerChange:function(e){var t=Number(e.currentTarget.dataset.index),i=e.currentTarget.dataset.key;this.allList[i].inputList[t].checkedIndex=e.detail.value,1!=t&&(this.i=e.detail.value,this.allList[i].inputList[t].value=this.allList[i].inputList[t].regionKeys[this.i])},DateChange:function(e){var t=Number(e.currentTarget.dataset.index),i=e.currentTarget.dataset.key;this.allList[i].inputList[t].value=e.detail.value},submit:function(){var t=this,i={};for(var a in this.allList)this.allList[a].inputList.forEach(function(e){"leixing"!=e.key&&t.$set(i,e.key,e.value)});if(""!=i.pname)if(""!=i.mobile)if(/^1[345789]\d{9}$/.test(i.mobile))if(""!=i.idcard)if(this.reg.test(i.idcard))if(""!=i.sex)if(""!=i.pref)if(""!=i.nation){if(this.allList.ref.isFill){if(""==i.refPersonPref)return void e.showToast({title:"监护人关系不可为空",icon:"none"});if(""==i.refPersonIdcard)return void e.showToast({title:"身份证号码不能为空",icon:"none"});if(!this.reg.test(i.refPersonIdcard))return void e.showToast({title:"监护人身份证号码格式填写不对",icon:"none"});if(""==i.refPersonSex)return void e.showToast({title:"监护人性别不能为空",icon:"none"})}i.userId=this.$status.userId(),this.$globalMethod.ds_api({method:"m=Y004&token=SemXlsuV0Ko2Ugrp&openId="+this.$globalMethod.openID+"&publicOpenId="+this.$globalMethod.openWatchId,loadmsg:"提交信息",data:i,success:function(i){i&&i.data.data&&(e.showToast({title:"提交成功"}),t.$status.addRefreshNum("patient-manage"),e.navigateBack())},fail:function(t){e.showToast({title:t,icon:"none"})}})}else e.showToast({title:"民族不能为空",icon:"none"});else e.showToast({title:"成员关系不能为空",icon:"none"});else e.showToast({title:"性别不能为空",icon:"none"});else e.showToast({title:"身份证号码格式填写不对",icon:"none"});else e.showToast({title:"身份证号码不能为空",icon:"none"});else e.showToast({title:"手机格式填写不对",icon:"none"});else e.showToast({title:"手机号码不能为空",icon:"none"});else e.showToast({title:"姓名不能为空",icon:"none"})},getData:function(){var e=this;this.$globalMethod.ds_api({method:"m=K001&token=SemXlsuV0Ko2Ugrp",loadmsg:"关系查询",showLoading:!1,data:{dcode:"DICT_HOSP_PERSON_REF",dkey:"",dvalue:""},success:function(t){t&&t.data.data&&0!=t.data.data.length&&t.data.data.forEach(function(t){e.allList.base.inputList[6].region.push(t.dvalue),e.allList.base.inputList[6].regionKeys.push(t.dkey),e.allList.ref.inputList[5].region.push(t.dvalue),e.allList.ref.inputList[5].regionKeys.push(t.dkey)})}}),this.$globalMethod.ds_api({method:"m=K001&token=SemXlsuV0Ko2Ugrp",loadmsg:"民族查询",data:{dcode:"DICT_STD_NATION_CODE",dkey:"",dvalue:""},success:function(t){t&&t.data.data&&0!=t.data.data.length&&t.data.data.forEach(function(t){e.allList.base.inputList[5].region.push(t.dvalue),e.allList.base.inputList[5].regionKeys.push(t.dkey)})}})}},computed:n({},(0,a.mapState)(["$status"]))};t.default=o}).call(this,i("543d")["default"])}},[["4b95","common/runtime","common/vendor"]]]);