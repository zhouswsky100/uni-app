(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/appointment/select-patient/basisinformation"],{5457:function(e,t,a){"use strict";(function(e){a("9e88"),a("921b");n(a("66fd"));var t=n(a("de3e"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},"673c":function(e,t,a){"use strict";var n,i=function(){var e=this,t=e.$createElement;e._self._c},r=[];a.d(t,"b",function(){return i}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return n})},7344:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("a34a")),i=a("2f62");function r(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){o(e,t,a[t])})}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function d(e,t,a,n,i,r,u){try{var o=e[r](u),d=o.value}catch(s){return void a(s)}o.done?t(d):Promise.resolve(d).then(n,i)}function s(e){return function(){var t=this,a=arguments;return new Promise(function(n,i){var r=e.apply(t,a);function u(e){d(r,n,i,u,o,"next",e)}function o(e){d(r,n,i,u,o,"throw",e)}u(void 0)})}}var l={data:function(){return{i:0,userDetail:{pname:{title:"姓名",value:""},idcardType:{title:"证件类型",value:"身份证"},idcard:{title:"身份证",value:""},sex:{title:"性别",value:""},nationName:{title:"民族",value:"",code:""},birthday:{title:"出生日期",value:"2000-01-01"},pref:{title:"成员关系",value:"1",region:[],regionKeys:[],checkedIndex:0},mobile:{title:"手机号码",value:"123454445"}},otherInfo:{insuranceCard:{title:"社保卡号",value:"",placeholder:"未填写"},healthCardNo:{title:"健康卡号",value:"",placeholder:"未申请健康卡"},zhenka:{title:"就诊卡",value:"",placeholder:"新增加和编辑就诊卡"}},idcard:"",aumUuid:0,userMemberUuid:0,switchChecked:!1}},onLoad:function(e){this.idcard=e.idcard,this.aumUuid=e.aumUuid,this.getData()},methods:{switchChange:function(e){this.switchChecked=e.detail.value},cardClick:function(t){"zhenka"==t&&e.navigateTo({url:"/pages/appointment/card/id-type-card?aumUuid="+this.aumUuid})},PickerChange:function(t){if(1!=this.userDetail.pref.value){Number(t.currentTarget.dataset.index);this.userDetail.pref.checkedIndex=t.detail.value,this.i=t.detail.value,this.userDetail.pref.value=this.userDetail.pref.regionKeys[this.i]}else e.showToast({title:"本人不可修改关系",icon:"none"})},submit:function(){var t=this,a={};for(var n in this.userDetail)"idcardType"!=n&&"nationName"!=n&&(a[n]=this.userDetail[n].value);a.userId=this.$status.userId(),a.aumUuid=this.aumUuid,a.insuranceCard=this.otherInfo.insuranceCard.value,a.userMemberUuid=this.switchChecked?this.aumUuid:this.userMemberUuid,this.$globalMethod.ds_api({method:"m=Y008&token=SemXlsuV0Ko2Ugrp&openId="+this.$globalMethod.openID,loadmsg:"修改就诊人",showLoading:!1,data:a,success:function(a){a&&a.data.data&&(e.showToast({title:"修改成功",icon:"none"}),t.$status.addRefreshNum("patient-manage"),e.navigateBack())},fail:function(t){e.showToast({title:t,icon:"none"})}})},getData:function(){var e=s(n.default.mark(function e(){var t,a=this;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$globalMethod.ds_api({method:"m=Y007&token=SemXlsuV0Ko2Ugrp&openId="+this.$globalMethod.openID,loadmsg:"就诊人信息",data:{userId:this.$status.userId(),idcard:this.idcard,aumUuid:this.aumUuid},success:function(e){if(e&&e.data.data&&0!=e.data.data.length){var t=e.data.data;for(var n in a.userMemberUuid=t.userMemberUuid,a.userDetail)"idcardType"!=n&&(a.userDetail[n].value=t[n],"nationName"==n&&(a.userDetail[n].code=t.nationCode),"pref"==n&&(a.userDetail[n].checkedIndex=t[n]),"sex"==n&&(a.userDetail[n].code=t.sex1));t.healthCardNo&&(a.otherInfo.healthCardNo.value=t.healthCardNo),t.insuranceCard&&(a.otherInfo.insuranceCard.value=t.insuranceCard)}}});case 2:t=e.sent,t&&this.$globalMethod.ds_api({method:"m=K001&token=SemXlsuV0Ko2Ugrp",loadmsg:"关系查询",showLoading:!1,data:{dcode:"DICT_HOSP_PERSON_REF",dkey:"",dvalue:""},success:function(e){if(e&&e.data.data&&0!=e.data.data.length)for(var t=e.data.data,n=0;n<t.length;n++)a.userDetail.pref.region.push(t[n].dvalue),a.userDetail.pref.regionKeys.push(t[n].dkey),t[n].dkey==a.userDetail.pref.value&&(a.userDetail.pref.checkedIndex=n)}});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},computed:u({},(0,i.mapState)(["$status"]))};t.default=l}).call(this,a("543d")["default"])},"82fb":function(e,t,a){"use strict";var n=a("9f72"),i=a.n(n);i.a},"9f72":function(e,t,a){},d789:function(e,t,a){"use strict";a.r(t);var n=a("7344"),i=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);t["default"]=i.a},de3e:function(e,t,a){"use strict";a.r(t);var n=a("673c"),i=a("d789");for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);a("82fb");var u,o=a("f0c5"),d=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],u);t["default"]=d.exports}},[["5457","common/runtime","common/vendor"]]]);